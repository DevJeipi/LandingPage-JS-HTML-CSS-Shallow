const express=require("express"),cors=require("cors"),axios=require("axios"),app=express();app.use(cors()),app.use(express.json());const API_KEY="c161e761d0de8149526f39669505844a8b1ab9bd65d0074b2280275e7b0d4ca4e536c369",API_URL="https://shallowbeachwear.api-us1.com/api/3";app.post("/api/enviar",async(o,a)=>{console.log("Chegou no backend com:",o.body);let{nome:s,email:t,telefone:c}=o.body;try{let e=await axios.post(`${API_URL}/contacts`,{contact:{email:t,firstName:s,phone:c}},{headers:{"Api-Token":API_KEY,"Content-Type":"application/json"}}),n=e.data.contact.id;await axios.post(`${API_URL}/contactLists`,{contactList:{list:4,contact:n,status:1}},{headers:{"Api-Token":API_KEY,"Content-Type":"application/json"}}),a.status(200).json({mensagem:"Contato adicionado e inscrito com sucesso!"})}catch(p){console.error("Erro no try/catch:",p),a.status(500).json({erro:"Erro ao enviar para o ActiveCampaign"})}}),app.listen(3e3,()=>{console.log("Servidor rodando em https://api-shallow.onrender.com")});